<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Grid Placement Test (neosurf)</title>
    <style>
        body {
            font-family: sans-serif;
            margin: 20px;
            background: #1a1a2e;
            color: #eee;
        }

        h1 {
            color: #00d9ff;
            margin-bottom: 5px;
        }

        h2 {
            color: #ff6b6b;
            margin: 20px 0 10px;
        }

        p {
            color: #888;
            margin: 5px 0 15px;
            font-size: 14px;
        }

        .grid {
            display: grid;
            gap: 5px;
            background: #16213e;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .item {
            background: #667eea;
            padding: 15px;
            border-radius: 4px;
            color: white;
            font-weight: bold;
            text-align: center;
            min-height: 30px;
        }

        .item.pink {
            background: #f5576c;
        }

        .item.green {
            background: #38ef7d;
            color: #333;
        }

        .item.orange {
            background: #ff9a44;
        }

        .item.purple {
            background: #a855f7;
        }

        .item.teal {
            background: #14b8a6;
        }

        /* Test 1: Basic explicit placement */
        .grid-explicit1 {
            grid-template-columns: 100px 100px 100px 100px;
            grid-template-rows: 60px 60px 60px;
        }

        /* Test 2: Explicit placement takes precedence */
        .grid-explicit2 {
            grid-template-columns: 100px 100px 100px;
            grid-template-rows: 60px 60px;
        }

        /* Test 3: Mixed explicit and auto */
        .grid-mixed {
            grid-template-columns: 100px 100px 100px 100px;
            grid-template-rows: 60px 60px 60px;
        }

        /* Test 4: Spanning with explicit position */
        .grid-span-explicit {
            grid-template-columns: 80px 80px 80px 80px;
            grid-template-rows: 60px 60px 60px;
        }

        /* Expected positions helper */
        .expected {
            background: #333;
            color: #0f0;
            font-family: monospace;
            padding: 10px;
            border-radius: 4px;
            margin-bottom: 15px;
            font-size: 12px;
        }
    </style>
</head>

<body>
    <h1>Grid Explicit Placement Test</h1>
    <p>Tests CSS Grid placement with explicit grid-column and grid-row positions</p>

    <!-- Test 1: Basic explicit placement -->
    <h2>Test 1: Basic Explicit Positions</h2>
    <p>Items placed at specific grid coordinates</p>
    <div class="expected">
        Expected: A@(1,1), B@(3,1), C@(2,2), D@(4,3)
    </div>
    <div class="grid grid-explicit1">
        <div class="item pink" style="grid-column: 1; grid-row: 1;">A (1,1)</div>
        <div class="item green" style="grid-column: 3; grid-row: 1;">B (3,1)</div>
        <div class="item orange" style="grid-column: 2; grid-row: 2;">C (2,2)</div>
        <div class="item purple" style="grid-column: 4; grid-row: 3;">D (4,3)</div>
    </div>

    <!-- Test 2: Explicit placement takes precedence over auto -->
    <h2>Test 2: Explicit Takes Precedence</h2>
    <p>Item B has explicit position (1,1), Item A (first in DOM) should yield</p>
    <div class="expected">
        Expected: B@(col1,row1) FIRST, A auto-places to (col2,row1), C auto-places to (col3,row1)<br>
        If A is missing, it's overlapping with B (BUG!)
    </div>
    <div class="grid grid-explicit2">
        <div class="item pink" style="opacity: 0.8;">A (auto)</div>
        <div class="item green" style="grid-column: 1; grid-row: 1; opacity: 0.8;">B (1,1)</div>
        <div class="item orange" style="opacity: 0.8;">C (auto)</div>
    </div>

    <!-- Test 3: Mixed explicit and auto placement -->
    <h2>Test 3: Mixed Explicit and Auto</h2>
    <p>Some items explicit, others auto-place around them</p>
    <div class="expected">
        Expected: X@(2,2) fixed, A/B/C/D auto-fill remaining cells
    </div>
    <div class="grid grid-mixed">
        <div class="item">A</div>
        <div class="item teal" style="grid-column: 2; grid-row: 2;">X (2,2)</div>
        <div class="item">B</div>
        <div class="item pink">C</div>
        <div class="item green">D</div>
    </div>

    <!-- Test 4: Spanning with explicit position -->
    <h2>Test 4: Spanning + Explicit Position</h2>
    <p>Wide item spans 2 cols starting at explicit column 2</p>
    <div class="expected">
        Expected: Wide@(2-3, 1) spans cols 2-3, others fill around
    </div>
    <div class="grid grid-span-explicit">
        <div class="item">1</div>
        <div class="item purple" style="grid-column: 2 / span 2; grid-row: 1;">Wide (2-3)</div>
        <div class="item">2</div>
        <div class="item pink">3</div>
        <div class="item green">4</div>
    </div>

    <!-- Test 5: Explicit row only -->
    <h2>Test 5: Explicit Row Only</h2>
    <p>Item has explicit row but auto column</p>
    <div class="expected">
        Expected: X forced to row 3, auto-places in first free column
    </div>
    <div class="grid grid-mixed">
        <div class="item">A</div>
        <div class="item">B</div>
        <div class="item orange" style="grid-row: 3;">X (row 3)</div>
        <div class="item">C</div>
        <div class="item pink">D</div>
    </div>

    <!-- Test 6: Explicit column only -->
    <h2>Test 6: Explicit Column Only</h2>
    <p>Item has explicit column but auto row</p>
    <div class="expected">
        Expected: X forced to column 4, auto-places in first free row
    </div>
    <div class="grid grid-mixed">
        <div class="item">A</div>
        <div class="item">B</div>
        <div class="item teal" style="grid-column: 4;">X (col 4)</div>
        <div class="item">C</div>
        <div class="item pink">D</div>
    </div>

</body>

</html>